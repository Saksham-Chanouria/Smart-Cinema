// Pure JavaScript replacement for old jQuery countdown plugin
// Usage: data-countdown="MM/DD/YYYY HH:mm:ss"

document.addEventListener("DOMContentLoaded", function () {
    const countdownElements = document.querySelectorAll("[data-countdown]");

    countdownElements.forEach((el) => {
        const dateStr = el.getAttribute("data-countdown");

        if (!dateStr || !Date.parse(dateStr)) {
            console.error("Invalid countdown date:", dateStr);
            return;
        }

        function updateCountdown() {
            const now = new Date();
            const target = new Date(dateStr);
            const diff = target - now;

            if (diff <= 0) {
                el.innerHTML = "00 : 00 : 00 : 00";
                clearInterval(interval);
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            el.querySelector(".days").innerText = String(days).padStart(2, "0");
            el.querySelector(".hours").innerText = String(hours).padStart(2, "0");
            el.querySelector(".minutes").innerText = String(minutes).padStart(2, "0");
            el.querySelector(".seconds").innerText = String(seconds).padStart(2, "0");

            el.querySelector(".days_text").innerText = days === 1 ? "Day" : "Days";
            el.querySelector(".hours_text").innerText = hours === 1 ? "Hour" : "Hours";
            el.querySelector(".minutes_text").innerText = minutes === 1 ? "Minute" : "Minutes";
            el.querySelector(".seconds_text").innerText = seconds === 1 ? "Second" : "Seconds";
        }

        const interval = setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call
    });
});